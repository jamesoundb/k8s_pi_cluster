---
# Default variables for common role

# Packages to install
common_packages:
  - apt-transport-https
  - ca-certificates
  - curl
  - gnupg
  - lsb-release
  - python3-pip
  - python3-venv
  - python3-dev
  - libffi-dev
  - libssl-dev
  - git
  - software-properties-common
  - htop
  - iotop
  - iftop
  - atop

# Kernel modules to enable
kernel_modules:
  - overlay
  - br_netfilter

# System optimization parameters
sysctl_settings:
  - { name: 'kernel.panic', value: '10' }
  - { name: 'kernel.panic_on_oops', value: '1' }
  - { name: 'vm.overcommit_memory', value: '1' }
  - { name: 'vm.panic_on_oom', value: '0' }
  - { name: 'net.ipv4.tcp_slow_start_after_idle', value: '0' }
  - { name: 'net.core.somaxconn', value: '32768' }
  - { name: 'net.ipv4.tcp_max_syn_backlog', value: '8096' }
  - { name: 'fs.inotify.max_user_watches', value: '524288' }
  - { name: 'fs.file-max', value: '1000000' }
  - { name: 'vm.swappiness', value: '1' }
  - { name: 'net.bridge.bridge-nf-call-iptables', value: '1' }
  - { name: 'net.bridge.bridge-nf-call-ip6tables', value: '1' }
  - { name: 'net.ipv4.ip_forward', value: '1' }

# Raspberry Pi specific optimizations
raspberry_pi_gpu_mem: 16